<a class="skip-link" href="#main" aria-label="Skip to main content">Skip to content</a>
<div class="app-shell" [class.sidebar-open]="sidebarOpen()" [class.nav-collapsed]="sidebarCollapsed()">
  <header class="topbar" role="banner">
    <div class="left-group">
  <button type="button" class="icon-btn menu" (click)="toggleSidebar()" aria-label="Toggle navigation" [attr.aria-expanded]="sidebarOpen()">☰</button>
      <div class="brand" aria-label="Application name">TaskZen</div>
    </div>
    <div class="center-group">
      <nav class="breadcrumbs" aria-label="Breadcrumb" *ngIf="breadcrumbs().length">
        <ng-container *ngFor="let c of breadcrumbs(); let last = last">
          <a *ngIf="c.url && !last" [routerLink]="c.url">{{ c.label }}</a>
          <span *ngIf="!c.url || last" class="current" aria-current="page">{{ c.label }}</span>
          <span class="sep" *ngIf="!last">/</span>
        </ng-container>
      </nav>
      <div class="search" role="search">
        <input type="search" placeholder="Search…" aria-label="Search" />
      </div>
    </div>
    <div class="top-actions">
      <div class="accent-swatches" aria-label="Select accent color">
        <button class="swatch" style="--sw:#7c3aed" (click)="setAccent('#7c3aed')" aria-label="Purple accent"></button>
        <button class="swatch" style="--sw:#6366f1" (click)="setAccent('#6366f1')" aria-label="Indigo accent"></button>
        <button class="swatch" style="--sw:#3b82f6" (click)="setAccent('#3b82f6')" aria-label="Blue accent"></button>
        <button class="swatch" style="--sw:#10b981" (click)="setAccent('#10b981')" aria-label="Green accent"></button>
      </div>
      <app-notification-bell></app-notification-bell>
    </div>
  </header>
  <app-side-nav [open]="sidebarOpen()" [collapsed]="sidebarCollapsed()" (close)="closeSidebar()" (toggleCollapse)="toggleCollapse()" (navigate)="closeSidebarOnMobile()"></app-side-nav>
  <div class="overlay" (click)="closeSidebar()" *ngIf="sidebarOpen()"></div>
  <main id="main" class="main" role="main">
    <router-outlet></router-outlet>
  </main>
</div>
